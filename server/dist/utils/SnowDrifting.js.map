{"version":3,"file":"SnowDrifting.js","sourceRoot":"","sources":["../../src/utils/SnowDrifting.ts"],"names":[],"mappings":";;;;;;AAAA,gCAA0C;AAC1C,+CAA4C;AAC5C,2CAAwC;AAExC;;;GAGG;AACH,8EAAmD;AACnD,MAAa,YAAa,SAAQ,mBAAQ;IAC/B,MAAM,KAAK,QAAQ;QACtB,OAAO,IAAI,CAAC,WAAW,EAAE,CAAC;IAC9B,CAAC;IAGM,YAAY;QACf,wCAAwC;QACxC,mDAAmD;QACnD,IAAI,SAAS,GAAG,CAAC,CAAC,iBAAW,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;QAC7C,IAAI,CAAC,OAAO,GAAG,IAAI,4BAAe,CAAC,EAAE,QAAQ,EAAE,SAAG,CAAC,UAAU,CAAC,QAAQ,GAAG,SAAS,EAAE,EAAE,qBAAS,CAAC,CAAC;IACrG,CAAC;IAEM,eAAe;QAClB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;IACxB,CAAC;IAEM,SAAS;QACZ,OAAO,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE,CAAC;IACrC,CAAC;CACJ;AApBD,oCAoBC","sourcesContent":["import { app, BigServerId } from \"../app\";\r\nimport { Sigleton } from \"../core/Sigleton\";\r\nimport { DateUtils } from \"./DateUtils\";\r\n\r\n/**\r\n * @description: \r\n * @author: bubao\r\n */\r\nimport SnowDriftingLib from \"./SnowDriftingLib.js\";\r\nexport class SnowDrifting extends Sigleton {\r\n    public static get Instance(): SnowDrifting {\r\n        return this.getInstance();\r\n    }\r\n\r\n    private genTool: any;\r\n    public initInstance(): void {\r\n        //最多支持10台机器跨区 因为机器长度最大为64台 目前就是 6线*10区 台\r\n        //需要注意该ID由后台赋值，必定是一个比较大的数字，需要取出末位，需要注意合服后，雪花ID重复的问题\r\n        let bigServer = ((BigServerId - 1) % 10) * 6;\r\n        this.genTool = new SnowDriftingLib({ WorkerId: app.serverInfo.serverId + bigServer }, DateUtils);\r\n    }\r\n\r\n    public destoryInstance(): void {\r\n        this.genTool = null;\r\n    }\r\n\r\n    public getOnlyId(): number {\r\n        return this.genTool.NextNumber();\r\n    }\r\n}\r\n"]}