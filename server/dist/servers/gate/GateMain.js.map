{"version":3,"file":"GateMain.js","sourceRoot":"","sources":["../../../src/servers/gate/GateMain.ts"],"names":[],"mappings":";;AAAA,mCAAgC;AAChC,sEAAmE;AAEnE,mDAAgD;AAChD,2DAAwD;AAExD,MAAqB,QAAS,SAAQ,iCAAe;IAC1C,MAAM,KAAK,QAAQ;QACtB,OAAO,IAAI,CAAC,WAAW,EAAE,CAAC;IAC9B,CAAC;IAEM,YAAY;QACf,IAAI,CAAC,aAAa,CAAC,mBAAQ,CAAC,iBAAiB,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;IAC3E,CAAC;IAEM,KAAK,CAAC,gBAAgB,CAAC,OAAgB;QAC1C,SAAS;QACT,IAAI,MAAM,GAAG,2BAAY,CAAC,QAAQ,CAAC,SAAS,EAAE,CAAC;QAC/C,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IACzB,CAAC;IAEM,iBAAiB,CAAC,GAAW;QAChC,OAAO,CAAC,GAAG,CAAC,mBAAmB,EAAE,GAAG,CAAC,CAAA;QACrC,IAAI,OAAO,GAAG,SAAG,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;QAClC,OAAO,CAAC,KAAK,EAAE,CAAC;IACpB,CAAC;CACJ;AApBD,2BAoBC","sourcesContent":["import { app } from \"../../app\";\r\nimport { BaseServerLogic } from \"../../components/BaseServerLogic\";\r\nimport { Session } from \"../../components/session\";\r\nimport { RpcEvent } from \"../../event/RpcEvent\";\r\nimport { SnowDrifting } from \"../../utils/SnowDrifting\";\r\n\r\nexport default class GateMain extends BaseServerLogic {\r\n    public static get Instance(): GateMain {\r\n        return this.getInstance();\r\n    }\r\n\r\n    public initInstance(): void {\r\n        this.bindRpcEvents(RpcEvent.OnKillSocketByUid, this.onKillSocketByUid);\r\n    }\r\n\r\n    public async clientOnCallback(session: Session) {\r\n        //临时的唯一ID\r\n        let onlyId = SnowDrifting.Instance.getOnlyId();\r\n        session.bind(onlyId);\r\n    }\r\n\r\n    public onKillSocketByUid(uid: number) {\r\n        console.log(\"onKillSocketByUid\", uid)\r\n        let session = app.getSession(uid);\r\n        session.close();\r\n    }\r\n}"]}