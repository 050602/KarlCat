{"version":3,"file":"DataBase.js","sourceRoot":"","sources":["../../src/database/DataBase.ts"],"names":[],"mappings":";;;;;AAAA,wDAAgC;AAChC,+CAA4C;AAC5C,8DAAsC;AACtC,4DAAoC;AAEpC,MAAqB,QAAS,SAAQ,mBAAQ;IAA9C;;QAYW,cAAS,GAAG,KAAK,CAAC;IAyB7B,CAAC;IAlCU,MAAM,KAAK,QAAQ;QACtB,OAAO,KAAK,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;IACvC,CAAC;IAEM,YAAY;IACnB,CAAC;IAEM,eAAe;IACtB,CAAC;IAIM,KAAK,CAAC,IAAI;QACb,IAAI,UAAU,GAAG,IAAI,CAAC;QACtB,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;YACnC,kBAAQ,CAAC,OAAO,CAAC,kCAAkC,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,EAAE,EAAE;gBAC7D,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;gBACvB,UAAU,CAAC,EAAE,GAAG,EAAE,CAAC;gBAEnB,oBAAU,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBACpB,mBAAS,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBAEnB,OAAO,CAAC,IAAI,CAAC,CAAC;YAClB,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,GAAG,EAAE,EAAE;gBACb,OAAO,CAAC,GAAG,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;gBAC5B,MAAM,CAAC,IAAI,CAAC,CAAA;YAChB,CAAC,CAAC,CAAA;QACN,CAAC,CAAC,CAAC;IAGP,CAAC;;AAjCL,2BAqCC;AAnCiB,wBAAe,GAAG,UAAU,CAAC","sourcesContent":["import mongoose from \"mongoose\";\r\nimport { Sigleton } from \"../core/Sigleton\";\r\nimport LoginTable from \"./LoginTable\";\r\nimport RoleTable from \"./RoleTable\";\r\n\r\nexport default class DataBase extends Sigleton {\r\n\r\n    public static SigletonInsName = \"DataBase\";\r\n    public static get Instance(): DataBase {\r\n        return super.getInstance(DataBase);\r\n    }\r\n\r\n    public initInstance() {\r\n    }\r\n\r\n    public destoryInstance() {\r\n    }\r\n    public DBIsReady = false;\r\n    public db: mongoose.Mongoose;\r\n\r\n    public async init() {\r\n        let thisobject = this;\r\n        return new Promise((resolve, reject) => {\r\n            mongoose.connect(\"mongodb://127.0.0.1:27017/LordDB\").then((db) => {\r\n                console.log(\"连接数据库成功\");\r\n                thisobject.db = db;\r\n\r\n                LoginTable.init(db);\r\n                RoleTable.init(db);\r\n\r\n                resolve(null);\r\n            }).catch((err) => {\r\n                console.log(\"数据库链接失败\", err);\r\n                reject(null)\r\n            })\r\n        });\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n}"]}